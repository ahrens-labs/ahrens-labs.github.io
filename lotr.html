<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahrens Labs - LOTR Quiz</title>
    <!-- Google Fonts Links (Crucial for consistent styling) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="wrapper">
	<header>
            <a href="index.html" class="logo-link">
                <img src="img/ahrens_labs_logo.png" alt="Ahrens Labs logo" class="header-logo">
            </a>
            <div class="header-content">
                <h1>Ahrens Labs</h1>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="labs.html">Labs & Projects</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="chess_engine.html">Chess Engine</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <main>
            <section class="quiz-container">
                <h2 class="quiz-title">The Lord of the Rings Quiz</h2>
                
                <div id="quiz-area">
                    <div id="question-display"></div>
                    <div id="options-container" class="options-container"></div>
                    <button id="next-btn" class="quiz-button">Next Question</button>
                    <div id="status-message"></div>
                </div>

                <div id="results-display" style="display: none;">
                    <h3>Your Character Match:</h3>
                    <div id="character-percentages"></div>
                </div>
            </section>
        </main>
        
        <div class="push"></div>
    </div>

    <footer>
        <p>&copy; 2025 Ahrens Labs. All rights reserved.</p>
    </footer>

    <script src="js/script.js"></script>
    <script>
        const quizQuestions = [
            "Which of these best describes your approach to a difficult journey?",
            "What is your greatest strength?",
            "Which weapon would you choose to wield?",
            "How do you feel about magic?",
            "What is your favorite kind of food?",
            "Where would you prefer to live?",
            "What is your most valued quality in a friend?",
            "What is your biggest fear?"
        ];

        const quizOptions = [
            ["Careful planning and preparation.", "Boldly charging into the unknown.", "Gathering a group to help you.", "Using your knowledge to find the best path."],
            ["Loyalty and courage.", "Wisdom and patience.", "Strength and tenacity.", "Kindness and generosity."],
            ["A sword.", "A bow and arrow.", "A staff.", "A sharp wit."],
            ["A tool for those with great wisdom.", "A dangerous force to be avoided.", "A useful skill to be learned.", "A magical ability you possess."],
            ["Hearty stews and fresh bread.", "Elaborate feasts with wine and song.", "Anything from the earth, especially mushrooms.", "A simple meal shared with friends."],
            ["A secluded, comfortable home.", "A fortress high on a mountain.", "A forest teeming with life.", "An underground kingdom."],
            ["Humor and good cheer.", "Reliability and honesty.", "Bravery and a strong sense of justice.", "A quiet, gentle spirit."],
            ["Losing your friends and family.", "Being trapped in a dark, confined space.", "The destruction of the natural world.", "Betrayal by someone you trust."]
        ];

        const characterCodes = {
            "frodo": ["Careful planning and preparation.", "Kindness and generosity.", "A sharp wit.", "A dangerous force to be avoided.", "A simple meal shared with friends.", "A secluded, comfortable home.", "A quiet, gentle spirit.", "Losing your friends and family."],
            "gandalf": ["Using your knowledge to find the best path.", "Wisdom and patience.", "A staff.", "A tool for those with great wisdom.", "Hearty stews and fresh bread.", "A fortress high on a mountain.", "Reliability and honesty.", "The destruction of the natural world."],
            "aragorn": ["Boldly charging into the unknown.", "Loyalty and courage.", "A sword.", "A useful skill to be learned.", "Hearty stews and fresh bread.", "A secluded, comfortable home.", "Bravery and a strong sense of justice.", "Betrayal by someone you trust."],
            "legolas": ["Gathering a group to help you.", "Strength and tenacity.", "A bow and arrow.", "A useful skill to be learned.", "Elaborate feasts with wine and song.", "A forest teeming with life.", "Humor and good cheer.", "The destruction of the natural world."]
        };

        const quizArea = document.getElementById('quiz-area');
        const resultsDisplay = document.getElementById('results-display');
        const questionDisplay = document.getElementById('question-display');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-btn');
        const statusMessage = document.getElementById('status-message');
        const characterPercentagesDiv = document.getElementById('character-percentages');

        let currentQuestionIndex = 0;
        let userAnswers = [];

        function displayQuestion() {
            if (currentQuestionIndex < quizQuestions.length) {
                const question = quizQuestions[currentQuestionIndex];
                const options = quizOptions[currentQuestionIndex];

                questionDisplay.textContent = question;
                optionsContainer.innerHTML = ''; // Clear previous options

                options.forEach(option => {
                    const label = document.createElement('label');
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.name = 'question' + currentQuestionIndex;
                    input.value = option;

                    label.appendChild(input);
                    label.appendChild(document.createTextNode(option));
                    optionsContainer.appendChild(label);
                });

                nextButton.textContent = 'Next Question';
            } else {
                calculateResults();
            }
        }

        nextButton.addEventListener('click', () => {
            const selectedOption = document.querySelector('input[name="question' + currentQuestionIndex + '"]:checked');
            if (selectedOption) {
                userAnswers.push(selectedOption.value);
                currentQuestionIndex++;
                displayQuestion();
                statusMessage.textContent = '';
            } else {
                statusMessage.textContent = 'Please select an option to continue.';
            }
        });

        function calculateResults() {
            let characterScores = {};

            // Initialize scores to 0 for all characters
            for (const character in characterCodes) {
                characterScores[character] = 0;
            }

            // Compare user answers to character codes
            for (const character in characterCodes) {
                let correctMatches = 0;
                const code = characterCodes[character];
                for (let i = 0; i < quizQuestions.length; i++) {
                    if (userAnswers[i] && userAnswers[i] === code[i]) {
                        correctMatches++;
                    }
                }
                // Store raw score, then calculate percentage later for display
                characterScores[character] = (100 / quizQuestions.length) * correctMatches;
            }

            displayResults(characterScores);
        }

        function displayResults(characterScores) {
            quizArea.style.display = 'none';
            resultsDisplay.style.display = 'block';
            characterPercentagesDiv.innerHTML = ''; // Clear previous results

            // Convert object to array for sorting
            const sortedResults = Object.entries(characterScores).sort(([, scoreA], [, scoreB]) => scoreB - scoreA);

            for (const [character, percentage] of sortedResults) {
                const resultDiv = document.createElement('div');
                resultDiv.classList.add('character-result');
                resultDiv.innerHTML = `<span>${character.charAt(0).toUpperCase() + character.slice(1)}:</span> <span>${percentage.toFixed(2)}%</span>`;
                characterPercentagesDiv.appendChild(resultDiv);
            }
        }

        // Initialize the quiz
        displayQuestion();
    </script>
</body>
</html>

